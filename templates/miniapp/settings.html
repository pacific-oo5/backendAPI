<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            margin: 0;
            padding: 16px;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            text-align: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color, #f0f0f0);
            font-size: 20px;
            font-weight: 600;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
            margin: 12px 0;
            border-radius: 12px;
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            cursor: pointer;
            user-select: none;
        }

        .settings-item:active {
            background-color: var(--tg-theme-button-color, #40a7e3);
            color: var(--tg-theme-button-text-color, #ffffff);
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            display: none;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc;
            border-radius: 24px;
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px; width: 20px;
            left: 2px; bottom: 2px;
            background-color: white;
            border-radius: 50%;
            transition: 0.4s;
        }

        input:checked + .slider {
            background-color: var(--tg-theme-button-color, #40a7e3);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <div class="header">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>

    <div class="settings-item">
        <span>–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span>
        <label class="toggle-switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
        </label>
    </div>

    <div class="settings-item" onclick="logoutUser()">
        <span>üö™ –í—ã–π—Ç–∏</span>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.BackButton.show();
        tg.BackButton.onClick(() => {
            window.history.back();
            tg.BackButton.hide(); // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
        });

        const themeToggle = document.getElementById('theme-toggle');

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º—ã Telegram
        themeToggle.checked = tg.colorScheme === "dark";

        // –°–ª–µ–¥–∏–º –∑–∞ —Å–º–µ–Ω–æ–π —Ç–µ–º—ã –≤ Telegram
        Telegram.WebApp.onEvent("themeChanged", () => {
            themeToggle.checked = tg.colorScheme === "dark";
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–¢—ë–º–Ω–∞—è —Ç–µ–º–∞"
        themeToggle.addEventListener('change', (e) => {
            // –ó–¥–µ—Å—å –Ω–µ–ª—å–∑—è –Ω–∞—Å–∏–ª—å–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å —Ç–µ–º—É Telegram,
            // —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–ª–∏ –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            alert("–¢–µ–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Telegram üì±.\n–°–º–µ–Ω–∏—Ç–µ –µ—ë –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–ª–∏–µ–Ω—Ç–∞.");
            themeToggle.checked = tg.colorScheme === "dark"; // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        });

        // –í—ã—Ö–æ–¥
        function logoutUser() {
            localStorage.clear();
            window.location.href = "/miniapp/main";
        }
    </script>
</body>
</html>
